<h1 class='text-center mt-5'><%= @recipe.name %></h1>

<section class="text-center mt-5">
  <%= render @recipe %>
  <div class="container col-6 d-flex justify-content-between align-content-center my-5">
    <%= button_to "Generate Shopping List", generate_shopping_list_recipe_path(@recipe), method: :post, class: "btn btn-primary" %>

    <% if current_user == @recipe.user %>
      <%= link_to "Add Ingredient", new_recipe_recipe_food_path(@recipe), class: "btn btn-success" %>
    <% end %>
  </div>

  <!-- Display the shopping list -->
  <div class="container col-6">
    <% if @user.shopping_list.present? %>
      <h2>Shopping List</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Food</th>
            <th>Quantity</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          <% @user.shopping_list.each do |food| %>
            <tr>
              <td><%= food.name %></td>
              <td><%= food.quantity_needed %></td>
              <td><%= food.price_per_unit %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p>No items in the shopping list.</p>
    <% end %>
  </div>

  <!-- Display the recipe foods -->
  <div class='container col-6'>
    <% if @recipe.recipe_foods.any? %>
      <h2>Recipe Foods</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Food</th>
            <th>Quantity</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          <% @recipe.recipe_foods.each do |recipe_food| %>
            <tr>
              <td><%= recipe_food.food.name %></td>
              <td><%= recipe_food.quantity %></td>
              <td><%= recipe_food.food.price %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p>No items in the recipe foods list.</p>
    <% end %>
  </div>

  <div class="container col-6 mt-5 d-flex justify-content-end align-content-center gap-5">
    <%= link_to "Edit this recipe", edit_recipe_path(@recipe), class: "btn btn-primary" %>
    <%= link_to "Back to recipes", recipes_path, class: "btn btn-secondary" %>
    <%= button_to "Delete this recipe", @recipe, method: :delete, class: "btn btn-danger" %>
  </div>
</section>
